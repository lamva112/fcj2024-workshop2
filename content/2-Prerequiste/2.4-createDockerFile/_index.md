---
title: " Create Dockerfile and Generate Docker Image"
date: "`r Sys.Date()`"
weight: 4
chapter: false
pre: "<b>2.4</b>"
---

#### Create Task
1. First, you need to create a task in the **build.gradle** file by copying the following code block:

```
tasks.register("unpack", Copy) {
	dependsOn bootJar
	from(zipTree(tasks.bootJar.outputs.files.singleFile))
	into("build/libs")
}
```

{{% notice tip %}}
This code defines a Gradle task named "unpack" that copies files from a ZIP archive generated by the "bootJar" task and extracts them into the "build/libs" directory.
{{% /notice %}}

![Architect](/images/1/createDocker/01.png?featherlight=false&width=60pc)

#### Create .dockerignore File
2. Create a `.dockerignore` file to specify files and directories that Docker should ignore when building a Docker image from your project components.

![Architect](/images/1/createDocker/02.png?featherlight=false&width=60pc)

3. Copy the code below:

```
.git
.gitignore
.dockerignore
.gradle
.idea

Dockerfile
README.md
```
![Architect](/images/1/createDocker/03.png?featherlight=false&width=60pc)

#### Create file Dockerfile

4. Create a Dockerfile and copy the code below:

```
FROM eclipse-temurin:21-jdk-alpine
VOLUME /tmp
ARG DEPENDENCY=build/libs
COPY ${DEPENDENCY}/BOOT-INF/lib /app/lib
COPY ${DEPENDENCY}/META-INF /app/META-INF
COPY ${DEPENDENCY}/BOOT-INF/classes /app
EXPOSE 8081
ENTRYPOINT ["java", "-cp", "app:app/lib/*", "com.firstcloudjourney.productsservice.ProductsserviceApplication"]
```
![Architect](/images/1/createDocker/04.png?featherlight=false&width=60pc)

#### Generate Docker Image

5. Next, let's configure IntelliJ to generate a Docker image:
   - Click on the **Run** icon and select **New Run Configuration**.

![Architect](/images/1/createDocker/05.png?featherlight=false&width=60pc)

6. A popup will appear where we'll configure as follows:
   - For **Image Tag**, enter **`productsservice:1.0.0`**.
   - Click **Modify Options**, then select **Build options**.
   - Once **Build options** appears, enter **`--platform linux/amd64`**.

![Architect](/images/1/createDocker/06.png?featherlight=false&width=60pc)

7. Next, we need to configure **Before Launch**:
   - Click the **+** icon and select **Run Gradle Task**.
   - Then a popup will appear as shown below:

![Architect](/images/1/createDocker/07.png?featherlight=false&width=60pc)

8. In the popup for **Select Gradle Task**:
   - For **Gradle project**, choose **productsservice**.
   - For **Task**, select the **unpack** task that we added earlier.
   - Click **OK**.

![Architect](/images/1/createDocker/08.png?featherlight=false&width=60pc)

9. After returning to the **Edit Configuration** popup, click **Apply**.

![Architect](/images/1/createDocker/09.png?featherlight=false&width=60pc)

#### Build Application using BootJar

10. Next, let's build the application using bootJar from Gradle:
    - Click on the **Gradle** icon.
    - Choose **Tasks**, then **build**, and finally click **bootJar** to build the application.

![Architect](/images/1/createDocker/10.png?featherlight=false&width=60pc)

11. Check the built application file located in `build/libs`.

![Architect](/images/1/createDocker/11.png?featherlight=false&width=60pc)

#### Generate Docker Image

12. Now, let's create a Docker image from the built application:
    - Click on the **Run** icon on the Dockerfile and choose **Build image for 'DockerFile'**.

{{% notice tip %}}
Make sure you have Docker Desktop running to successfully build the image.
{{% /notice %}}

![Architect](/images/1/createDocker/12.png?featherlight=false&width=60pc)

13. After successfully creating the image, you should see **productsservice:1.0.0** generated.

![Architect](/images/1/createDocker/13.png?featherlight=false&width=60pc)
